(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fdf9"],{Gmm9:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return r});var a=function(){return"undefined"!=typeof window?window:t},r=function(){var t=a();return t&&t.tinymce?t.tinymce:null}}).call(this,i("nagk"))},J197:function(t,e,i){"use strict";i.r(e);var a=i("6ZY3"),r=i.n(a),n=i("bS4n"),o=i.n(n),s=i("omC7"),l=i.n(s),c=i("xMja"),u=i("xAVR"),p=i("ip1f"),d=i("rs3x"),m=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],f=function(t){return-1!==m.indexOf(t)},g=function(t,e,i){var a=e.$props.value?e.$props.value:"",r=e.$props.initialValue?e.$props.initialValue:"";i.setContent(a||r),e.$listeners.input&&function(t,e){var i,a=t.$props.modelEvents?t.$props.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;t.$watch("value",function(t,a){e&&"string"==typeof t&&t!==i&&t!==a&&(e.setContent(t),i=t)}),e.on(r||"change keyup undo redo",function(){i=e.getContent(),t.$emit("input",i)})}(e,i),function(t,e,i){Object.keys(e).filter(f).forEach(function(a){var r=e[a];"function"==typeof r&&("onInit"===a?r(t,i):i.on(a.substring(2),function(t){return r(t,i)}))})}(t,e.$listeners,i)},h=0,b=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++h+String(e)},v=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},k=i("Gmm9"),_={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},y=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},w={listeners:[],scriptId:b("tiny-script"),scriptLoaded:!1},S=function(t){return function(){var e=y({},t.$props.init,{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:function(t,e){return v(t).concat(v(e))}(t.$props.init&&t.$props.init.plugins,t.$props.plugins),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",function(i){return g(i,t,e)}),t.$props.init&&"function"==typeof t.$props.init.setup&&t.$props.init.setup(e)}});(function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()})(t.element)&&(t.element.style.visibility=""),Object(k.a)().init(e)}},P={props:_,created:function(){this.elementId=this.$props.id||b("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(k.a)())S(this)();else if(this.element){var t=this.element.ownerDocument,e=this.$props.cloudChannel?this.$props.cloudChannel:"stable",i=this.$props.apiKey?this.$props.apiKey:"";!function(t,e,i,a){t.scriptLoaded?a():(t.listeners.push(a),e.getElementById(t.scriptId)||function(t,e,i,a){var r=e.createElement("script");r.type="application/javascript",r.id=t,r.addEventListener("load",a),r.src=i,e.head.appendChild(r)}(t.scriptId,e,i,function(){t.listeners.forEach(function(t){return t()}),t.scriptLoaded=!0}))}(w,t,"https://cloud.tinymce.com/"+e+"/tinymce.min.js?apiKey="+i,S(this))}},beforeDestroy:function(){null!==Object(k.a)()&&Object(k.a)().remove(this.editor)},render:function(t){return this.inlineEditor?function(t,e,i){return t(i||"div",{attrs:{id:e}})}(t,this.elementId,this.$props.tagName):function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})}(t,this.elementId)}},L=i("f04p"),x=i("X4fA"),C={name:"ProductUpsert",components:{Editor:P},data:function(){return{uploadPath:d.c,freightList:[],imgsFileList:[],categoryList:[],categoryIds:[],skuTableData:[],product:{imgList:[],type:0},attributeVisiable:!1,attributeForm:{attribute:"",value:""},attributes:[],skuBatchPriceVisiable:!1,skuBatchPriceForm:{},specVisiable:!1,specForm:{title:void 0},skuList:[],specList:[],skuStatusDialogMap:{create:"创建sku",update:"更新sku"},specStatusDialogMap:{create:"创建规格",update:"更新规格"},skuStatus:"",specStatus:"",rules:{categoryId:[{required:!0,message:"请选择商品类目",trigger:"blur"}],status:[{required:!0,message:"请选择商品状态",trigger:"blur"}],title:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],unit:[{required:!0,message:"物件单位不能为空",trigger:"blur"}],detail:[{required:!0,message:"请填写商品详情",trigger:"blur"}],freightTemplateId:[{required:!0,message:"请选择运费模板",trigger:"blur"}]},specRules:{title:[{required:!0,message:"规格维度标题不能为空",trigger:"blur"}]},attrRules:{attribute:[{required:!0,message:"属性名称不能为空",trigger:"blur"}],value:[{required:!0,message:"属性值不能为空",trigger:"blur"}]},editorInit:{language:"zh_CN",convert_urls:!1,plugins:["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],toolbar:["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],images_upload_handler:function(t,e,i){var a=new FormData;a.append("file",t.blob()),Object(d.b)(a).then(function(t){e(t.data.url)}).catch(function(){i("上传失败，请重新上传")})}}}},computed:{headers:function(){return{ADMINTOKEN:Object(x.a)()}}},created:function(){this.init()},methods:{init:function(){var t=this,e=this.$route.query.id;e&&Object(c.d)(e).then(function(e){e.data.data.priceRaw=e.data.data.price/100,e.data.data.originalPriceRaw=e.data.data.originalPrice/100,e.data.data.vipPriceRaw=e.data.data.vipPrice/100,t.product=JSON.parse(l()(e.data.data)),t.attributes=e.data.data.attributeList?e.data.data.attributeList:[],t.categoryIds=e.data.data.categoryIds,t.skuList=e.data.data.skuList;for(var i=0;i<e.data.data.specificationList.length;i++)e.data.data.specificationList[i].values=[],e.data.data.specificationList[i].inputSkuTagValue=!1,e.data.data.specificationList[i].inputSkuTagValue="";t.specList=e.data.data.specificationList,t.imgsFileList=[];for(var a=0;a<t.product.imgList.length;a++)t.imgsFileList.push({url:t.product.imgList[a]});var r=0;if(t.product.skuList)for(var n=0;n<t.product.skuList.length;n++)t.skuList[n].priceRaw=t.skuList[n].price/100,t.skuList[n].originalPriceRaw=t.skuList[n].originalPrice/100,t.skuList[n].vipPriceRaw=t.skuList[n].vipPrice/100,r+=t.skuList[n].stock;t.product.stock=r,t.product.skuList&&t.product.skuList.forEach(function(e){t.product.stock+=e.stock,e.priceRaw=e.price/100,e.originalPriceRaw=e.originalPrice/100,e.vipPriceRaw=e.vipPrice/100;for(var i=e.specification.split(","),a=0;a<i.length;a++){var r=i[a].split("_");e["id_"+r[0]]=r[1];for(var n=0;n<t.specList.length;n++)t.specList[n].title===r[0]&&(t.specList[n].values?t.specList[n].values.indexOf(r[1])<0&&t.specList[n].values.push(r[1]):(t.specList[n].inputSkuTagVisible=!1,t.specList[n].inputSkuTagValue="",t.specList[n].values=[r[1]]))}}),t.product.skuList.sort(function(e,i){var a=t.getSortKey(e.specification),r=t.getSortKey(i.specification);return a.localeCompare(r)}),t.skuTableData=JSON.parse(l()(t.product.skuList))}),Object(u.a)().then(function(e){t.categoryList=e.data.data}),Object(p.c)().then(function(e){t.freightList=e.data.data})},getSortKey:function(t){for(var e=t.split(","),i="",a=0;a<e.length;a++){i+=e[a].split("_")[0]+"_"}for(var r=0;r<e.length;r++){i+=e[r].split("_")[1]+"_"}return i},handleCategoryChange:function(t){this.product.categoryId=t[t.length-1]},handleCancel:function(){this.$router.push({path:"/product/list"})},handleUpsert:function(t){var e=this;this.$refs.dataForm.validate(function(i){if(i)if(void 0===e.product.freightTemplateId||null===e.product.freightTemplateId)e.$notify.error({title:"失败",message:"请添加运费模板"});else if(0===e.skuTableData.length)e.$notify.error({title:"失败",message:"请添加类型（Sku）"});else if(2!==e.categoryIds.length)e.$notify.error({title:"失败",message:"请选择（第二级）类目"});else if(0===e.product.imgList.length)e.$notify.error({title:"失败",message:"请上传至少一张图片"});else{e.product.categoryId=e.categoryIds[1],e.product.price=parseInt(100*e.product.priceRaw),e.product.originalPrice=parseInt(100*e.product.originalPriceRaw),e.product.vipPrice=parseInt(100*e.product.vipPriceRaw),e.product.specificationList=e.specList;for(var a=[],r=0;r<e.skuTableData.length;r++){var n="",s="";for(var l in e.skuTableData[r])l.startsWith("id_")&&(n+=e.skuTableData[r][l]+",",s+=l.substring(3)+"_"+e.skuTableData[r][l]+",");n=n.substring(0,n.length-1),s=s.substring(0,s.length-1);var u={originalPrice:parseInt(100*e.skuTableData[r].originalPriceRaw),price:parseInt(100*e.skuTableData[r].priceRaw),vipPrice:parseInt(100*e.skuTableData[r].vipPriceRaw),stock:e.skuTableData[r].stock,barCode:e.skuTableData[r].barCode,weight:e.skuTableData[r].weight,img:e.skuTableData[r].img,title:n,specification:s};e.skuTableData[r].id&&(u.id=e.skuTableData[r].id),a.push(u)}var p=o()({},e.product,{attributeList:e.attributes,skuList:a}),d=c.b,m="创建成功";"edit"===t&&(d=c.e,m="编辑成功"),d(p).then(function(t){e.$notify.success({title:"成功",message:m}),e.$router.push({path:"/product/list"})}).catch(function(t){L.MessageBox.alert("业务错误："+t.data.errmsg,"警告",{confirmButtonText:"确定",type:"error"})})}else e.$notify.error({title:"失败",message:"请完善以上表单"})})},handleAttributeShow:function(){this.attributeForm={},this.attributeVisiable=!0},handleAttributeAdd:function(){var t=this;this.$refs.attributeForm.validate(function(e){e&&(t.attributes.unshift(t.attributeForm),t.attributeVisiable=!1)})},handleAttributeDelete:function(t){var e=this.attributes.indexOf(t);this.attributes.splice(e,1)},handleSkuTagClose:function(t,e,i){i.values.splice(i.values.indexOf(e),1),this.loadSkuTable()},skuTableSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(i<this.specList.length){for(var a=1,r=i+1;r<this.specList.length;r++)a*=this.specList[r].values.length;return e%a==0?{rowspan:a,colspan:1}:{rowspan:0,colspan:0}}return{rowspan:1,colspan:1}},loadSkuTable:function(){for(var t=this.specList,e=this.skuTableData,i=[],a=0;a<t.length;a++){var n=t[a],o=[];if(0===a){for(var s=0;s<n.values.length;s++){var l=[];l.push(n.values[s]),o.push(l)}i=o}else{for(var c=0;c<i.length;c++)for(var u=0;u<n.values.length;u++){var p=r()([],i[c]);p.push(n.values[u]),o.push(p)}i=o}}for(var d=[],m=0;m<i.length;m++){for(var f={},g=0;g<i[m].length;g++)f["id_"+t[g].title]=i[m][g];for(var h=0;h<e.length;h++){for(var b=!0,v=0;v<this.specList.length;v++){var k=this.specList[v].title;e[h]["id_"+k]!==f["id_"+k]&&(b=!1)}b&&(f.originalPrice=e[h].originalPrice,f.price=e[h].price,f.originalPriceRaw=e[h].originalPriceRaw,f.vipPrice=e[h].vipPrice,f.vipPriceRaw=e[h].vipPriceRaw,f.priceRaw=e[h].priceRaw,f.stock=e[h].stock,f.barCode=e[h].barCode,f.weight=e[h].weight,f.id=e[h].id)}d.push(f)}this.skuTableData=d},handleSkuTagInputConfirm:function(t,e){var i=e.inputSkuTagValue;e.values.indexOf(i)>-1?this.$notify.warning({title:"失败",message:"请不要添加重复属性"}):i&&e.values.push(i),e.inputSkuTagVisible=!1,e.inputSkuTagValue="",this.loadSkuTable()},handleSkuTagCreate:function(t){t.inputSkuTagVisible=!0,this.$forceUpdate()},createSpecDialogShow:function(){this.specStatus="create",this.specForm={},this.specVisiable=!0},updateSpecDialogShow:function(t){this.specStatus="update",this.specForm=r()({},t),this.specVisiable=!0},handleSpecAdd:function(){var t=this;this.$refs.specForm.validate(function(e){if(e){var i=t.specForm.title;if(t.specList.indexOf(i)>=0)return void t.$notify.error({title:"失败",message:"规格维度不能重复"});var a=r()({},t.specForm);a.values=[],a.inputSkuTagVisible=!1,a.gmtCreate=(new Date).getTime(),t.specList.push(a),t.specVisiable=!1}})},handleSpecDelete:function(t){var e=this.specList.indexOf(t);this.specList.splice(e,1)},randonBarcode:function(t){t.barCode=(new Date).getTime()+"",this.$forceUpdate()},handleBatchPrice:function(){for(var t=0;t<this.skuTableData.length;t++)this.skuBatchPriceForm.price&&(this.skuTableData[t].priceRaw=this.skuBatchPriceForm.price),this.skuBatchPriceForm.vipPrice&&(this.skuTableData[t].vipPriceRaw=this.skuBatchPriceForm.vipPrice),this.skuBatchPriceForm.originalPrice&&(this.skuTableData[t].originalPriceRaw=this.skuBatchPriceForm.originalPrice);this.skuBatchPriceVisiable=!1},uploadOverrun:function(){this.$message({type:"error",message:"上传文件个数超出限制!最多上传5张图片!"})},handleimgsUrl:function(t,e,i){200===t.errno&&(this.product.imgList.push(t.url),this.product.img=this.product.imgList[0])},handleRemove:function(t,e){for(var i=0;i<this.product.imgList.length;i++){var a;a=void 0===t.response?t.url:t.response.url,this.product.imgList[i]===a&&this.product.imgList.splice(i,1)}this.product.imgList.length>0&&(this.product.img=this.product.imgList[0])},beforSkuImgUpload:function(t){var e=t.size/1024/1024<1;return e||this.$message.error("上传头像图片大小不能超过 1MB!"),e},handleSkuImgSuccess:function(t,e,i){this.$set(this.skuTableData[i.$index],"img",t.url)}}},$=(i("jzhW"),i("ZrdR")),T=Object($.a)(C,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-card",{staticClass:"box-card"},[i("h3",[t._v("商品（Spu）介绍")]),t._v(" "),i("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.product,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[i("el-input",{model:{value:t.product.title,callback:function(e){t.$set(t.product,"title",e)},expression:"product.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"运费模板",prop:"freightTemplateId"}},[i("el-select",{attrs:{placeholder:"选择商品运费模板"},model:{value:t.product.freightTemplateId,callback:function(e){t.$set(t.product,"freightTemplateId",e)},expression:"product.freightTemplateId"}},t._l(t.freightList,function(t,e){return i("el-option",{key:e,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"是否在售",prop:"status"}},[i("el-radio-group",{model:{value:t.product.status,callback:function(e){t.$set(t.product,"status",e)},expression:"product.status"}},[i("el-radio",{attrs:{label:1}},[t._v("在售")]),t._v(" "),i("el-radio",{attrs:{label:0}},[t._v("下架")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"商品图片"}},[i("el-upload",{attrs:{action:t.uploadPath,headers:t.headers,limit:5,"file-list":t.imgsFileList,"on-exceed":t.uploadOverrun,"on-success":t.handleimgsUrl,"on-remove":t.handleRemove,multiple:"",accept:".jpg, .jpeg, .png, .gif","list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"商品单位",prop:"unit"}},[i("el-input",{attrs:{placeholder:"件 / 个 / 盒"},model:{value:t.product.unit,callback:function(e){t.$set(t.product,"unit",e)},expression:"product.unit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"所属类目",prop:"categoryId"}},[i("el-cascader",{attrs:{options:t.categoryList,props:{label:"title",value:"id",children:"childrenList"},"expand-trigger":"hover"},on:{change:t.handleCategoryChange},model:{value:t.categoryIds,callback:function(e){t.categoryIds=e},expression:"categoryIds"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品简介",prop:"description"}},[i("el-input",{model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品详细介绍",prop:"detail"}},[i("editor",{attrs:{init:t.editorInit},model:{value:t.product.detail,callback:function(e){t.$set(t.product,"detail",e)},expression:"product.detail"}})],1)],1)],1),t._v(" "),i("el-card",{staticClass:"box-card"},[i("h3",[t._v("商品参数")]),t._v(" "),i("el-button",{attrs:{plain:!0,type:"primary"},on:{click:t.handleAttributeShow}},[t._v("添加")]),t._v(" "),i("el-table",{attrs:{data:t.attributes}},[i("el-table-column",{attrs:{property:"attribute",label:"参数名称"}}),t._v(" "),i("el-table-column",{attrs:{property:"value",label:"参数值"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"100","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleAttributeDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.attributeVisiable,title:"设置商品参数"},on:{"update:visible":function(e){t.attributeVisiable=e}}},[i("el-form",{ref:"attributeForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.attributeForm,rules:t.attrRules,data:t.attributes,"status-icon":"","label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"参数名称",prop:"attribute"}},[i("el-input",{model:{value:t.attributeForm.attribute,callback:function(e){t.$set(t.attributeForm,"attribute",e)},expression:"attributeForm.attribute"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"参数值",prop:"value"}},[i("el-input",{model:{value:t.attributeForm.value,callback:function(e){t.$set(t.attributeForm,"value",e)},expression:"attributeForm.value"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.attributeVisiable=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleAttributeAdd}},[t._v("确定")])],1)],1)],1),t._v(" "),i("el-card",{staticClass:"box-card"},[i("h3",[i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),i("span",[t._v("规格维度")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加例如 颜色，尺码等规格维度（至少存在一个规格维度）",placement:"top-start"}},[i("i",{staticClass:"el-icon-question"})])],1),t._v(" "),i("el-button",{attrs:{plain:!0,type:"primary"},on:{click:t.createSpecDialogShow}},[t._v("添加")]),t._v(" "),i("el-table",{attrs:{data:t.specList}},[i("el-table-column",{attrs:{property:"id",label:"维度Id"}}),t._v(" "),i("el-table-column",{attrs:{property:"title",label:"维度名称"}}),t._v(" "),i("el-table-column",{attrs:{property:"gmtCreate",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatTime")(e.row.gmtCreate)))]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"180","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.updateSpecDialogShow(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleSpecDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{visible:t.specVisiable,title:t.specStatusDialogMap[t.specStatus]},on:{"update:visible":function(e){t.specVisiable=e}}},[i("el-form",{ref:"specForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.specForm,rules:t.specRules,"status-icon":"","label-position":"left","label-width":"100px"}},[i("el-input",{attrs:{type:"hidden"},model:{value:t.specForm.id,callback:function(e){t.$set(t.specForm,"id",e)},expression:"specForm.id"}}),t._v(" "),i("el-form-item",{attrs:{label:"类型名称",prop:"title"}},[i("el-input",{model:{value:t.specForm.title,callback:function(e){t.$set(t.specForm,"title",e)},expression:"specForm.title"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.specVisiable=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSpecAdd}},[t._v("确定")])],1)],1)],1),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("h3",[i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),i("span",[t._v("商品(Sku)详情")])]),t._v(" "),i("el-button",{attrs:{plain:!0,type:"primary"},on:{click:function(e){t.skuBatchPriceVisiable=!0}}},[t._v("批量定价")])],1),t._v(" "),t._l(t.specList,function(e,a){return i("div",{key:a,staticClass:"tag-group"},[i("el-tag",{attrs:{size:"medium",type:"warning"}},[t._v("\n        "+t._s(e.title)+"\n      ")]),t._v(" "),t._l(e.values,function(r){return i("el-tag",{key:r,attrs:{"disable-transitions":!1,size:"medium",closable:""},on:{close:function(i){t.handleSkuTagClose(a,r,e)}}},[t._v("\n        "+t._s(r)+"\n      ")])}),t._v(" "),e.inputSkuTagVisible?i("el-input",{staticClass:"input-new-tag",attrs:{size:"small",maxlength:"30"},on:{blur:function(i){t.handleSkuTagInputConfirm(a,e)}},nativeOn:{keyup:function(i){if(!("button"in i)&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.handleSkuTagInputConfirm(a,e)}},model:{value:e.inputSkuTagValue,callback:function(i){t.$set(e,"inputSkuTagValue",i)},expression:"item.inputSkuTagValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(i){t.handleSkuTagCreate(e)}}},[t._v("+ 添加")])],2)}),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.skuTableData,"span-method":t.skuTableSpanMethod,border:""}},[t._l(t.specList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:"id_"+t.title,label:t.title,width:"120"}})}),t._v(" "),i("el-table-column",{attrs:{prop:"id",label:"SkuId",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{width:"155",prop:"price",label:"￥价格(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:e.row.priceRaw,callback:function(i){t.$set(e.row,"priceRaw",i)},expression:"scope.row.priceRaw"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"originalPrice",width:"155",label:"￥VIP价(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:e.row.vipPriceRaw,callback:function(i){t.$set(e.row,"vipPriceRaw",i)},expression:"scope.row.vipPriceRaw"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"originalPrice",width:"155",label:"￥吊牌价(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:e.row.originalPriceRaw,callback:function(i){t.$set(e.row,"originalPriceRaw",i)},expression:"scope.row.originalPriceRaw"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存("+(t.product.unit?t.product.unit:"件")+")",width:"155",prop:"stock"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input-number",{attrs:{precision:0,max:2147483647,min:0,size:"small"},model:{value:e.row.stock,callback:function(i){t.$set(e.row,"stock",i)},expression:"scope.row.stock"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"重量(克)",width:"155",prop:"stock"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input-number",{attrs:{precision:0,max:2147483647,min:0,size:"small"},model:{value:e.row.weight,callback:function(i){t.$set(e.row,"weight",i)},expression:"scope.row.weight"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"img",width:"85",label:"SKU图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-upload",{staticClass:"sku-uploader",attrs:{headers:t.headers,"show-file-list":!1,"on-success":function(i,a){t.handleSkuImgSuccess(i,a,e)},"before-upload":t.beforSkuImgUpload,action:t.uploadPath,accept:".jpg, .jpeg, .png, .gif"}},[e.row.img?i("img",{staticClass:"sku",attrs:{src:e.row.img}}):i("i",{staticClass:"el-icon-plus sku-uploader-icon"})])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"barCode",width:"210",label:"条形码"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{maxlength:"200"},model:{value:e.row.barCode,callback:function(i){t.$set(e.row,"barCode",i)},expression:"scope.row.barCode"}},[i("el-button",{attrs:{slot:"append"},on:{click:function(i){t.randonBarcode(e.row)}},slot:"append"},[t._v("随机")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:""}})],2),t._v(" "),i("el-dialog",{attrs:{visible:t.skuBatchPriceVisiable,title:"批量定价"},on:{"update:visible":function(e){t.skuBatchPriceVisiable=e}}},[i("el-form",{ref:"skuBatchPriceForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.skuBatchPriceForm,"status-icon":"","label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"现价(￥)",prop:"price"}},[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:t.skuBatchPriceForm.price,callback:function(e){t.$set(t.skuBatchPriceForm,"price",e)},expression:"skuBatchPriceForm.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"VIP价格(￥)",prop:"vipPrice"}},[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:t.skuBatchPriceForm.vipPrice,callback:function(e){t.$set(t.skuBatchPriceForm,"vipPrice",e)},expression:"skuBatchPriceForm.vipPrice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"吊牌价(￥)",prop:"originalPrice"}},[i("el-input-number",{attrs:{precision:2,min:.01,max:2147483647,size:"small"},model:{value:t.skuBatchPriceForm.originalPrice,callback:function(e){t.$set(t.skuBatchPriceForm,"originalPrice",e)},expression:"skuBatchPriceForm.originalPrice"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.skuBatchPriceVisiable=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleBatchPrice}},[t._v("确定")])],1)],1)],2),t._v(" "),i("div",{staticClass:"op-container"},[i("el-button",{on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),t.product.id?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleUpsert("create")}}},[t._v("保存商品")]),t._v(" "),t.product.id?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleUpsert("edit")}}},[t._v("更新商品")]):t._e()],1)],1)},[],!1,null,null,null);T.options.__file="upsert.vue";e.default=T.exports},JXgE:function(t,e,i){var a=i("zpmP"),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},"Z8/X":function(t,e,i){},ip1f:function(t,e,i){"use strict";i.d(e,"c",function(){return u}),i.d(e,"a",function(){return p}),i.d(e,"b",function(){return d}),i.d(e,"d",function(){return m});var a=i("omC7"),r=i.n(a),n=i("bS4n"),o=i.n(n),s=i("t3Un"),l=i("lgVQ"),c=i.n(l);function u(){return Object(s.a)({method:"get",params:{_gp:"admin.freight",_mt:"list",adminId:"guest"}})}function p(t){return Object(s.a)({method:"post",data:c.a.stringify(o()({_gp:"admin.freight",_mt:"create"},t,{carriageDOList:r()(t.carriageDOList)}))})}function d(t){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.freight",_mt:"delete",id:t})})}function m(t){return Object(s.a)({method:"post",data:c.a.stringify(o()({_gp:"admin.freight",_mt:"edit"},t,{carriageDOList:r()(t.carriageDOList)}))})}},jzhW:function(t,e,i){"use strict";var a=i("Z8/X");i.n(a).a},omC7:function(t,e,i){t.exports={default:i("JXgE"),__esModule:!0}},rs3x:function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o});var a=i("t3Un"),r="http://localhost:8080/upload/admin";function n(t){return Object(a.a)({url:r,method:"post",data:t})}function o(t){var e="image/jpeg"===t.type||"image/gif",i=t.size/1024/1024<1;return e||this.$message.error("上传文件只能是图片格式!"),i||this.$message.error("上传文件大小不能超过 1MB!"),e&&i}},xAVR:function(t,e,i){"use strict";i.d(e,"a",function(){return l}),i.d(e,"b",function(){return c}),i.d(e,"d",function(){return u}),i.d(e,"c",function(){return p});var a=i("bS4n"),r=i.n(a),n=i("t3Un"),o=i("lgVQ"),s=i.n(o);function l(){return Object(n.a)({method:"get",params:{_gp:"admin.category",_mt:"categoryTree"}})}function c(t){return Object(n.a)({method:"post",data:s.a.stringify(r()({_gp:"admin.category",_mt:"create"},t))})}function u(t){return Object(n.a)({method:"post",data:s.a.stringify(r()({_gp:"admin.category",_mt:"update"},t))})}function p(t){return Object(n.a)({method:"post",params:{_gp:"admin.category",_mt:"delete",id:t}})}},xMja:function(t,e,i){"use strict";i.d(e,"g",function(){return u}),i.d(e,"h",function(){return p}),i.d(e,"e",function(){return d}),i.d(e,"c",function(){return m}),i.d(e,"a",function(){return f}),i.d(e,"b",function(){return g}),i.d(e,"d",function(){return h}),i.d(e,"f",function(){return b}),i.d(e,"i",function(){return v});var a=i("omC7"),r=i.n(a),n=i("bS4n"),o=i.n(n),s=i("t3Un"),l=i("lgVQ"),c=i.n(l);function u(){return Object(s.a)({method:"get",params:{_gp:"admin.product",_mt:"getSpuBigTree"}})}function p(t){return Object(s.a)({method:"get",params:o()({_gp:"admin.product",_mt:"list"},t)})}function d(t){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.product",_mt:"edit",spuDTO:r()(t)})})}function m(t){return Object(s.a)({method:"post",params:{_gp:"admin.product",_mt:"delete",spuId:t}})}function f(t){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.product",_mt:"batchDelete",ids:r()(t)})})}function g(t){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.product",_mt:"create",spuDTO:r()(t)})})}function h(t){return Object(s.a)({method:"get",params:{_gp:"admin.product",_mt:"detail",spuId:t}})}function b(t,e){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.product",_mt:"freezeOrActivation",spuId:t,status:e})})}function v(){return Object(s.a)({method:"post",data:c.a.stringify({_gp:"admin.product",_mt:"rebuildProductCache"})})}}}]);